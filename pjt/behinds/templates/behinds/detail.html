{% extends 'base.html' %}
{% load static %}

{% block css %}
  <link rel="stylesheet" href="{% static "css/detail.css" %}">
{% endblock css %}

{% block content %}
  {% comment %} <h1 class="nav">디테일 페이지</h1> {% endcomment %}
  <a href="{% url 'behinds:index' %}"><img src="{% static "images/back.png" %}" alt="" class="back"></a>
  <div class="detail">
    <div class="detail-box">
      <div class="btn">
        <form action="{% url 'behinds:update' behind.pk %}" method="POST">
          {% csrf_token %}
          <button type="subimt" class="margin-btn"><img src="{% static "images/pencil.png" %}" alt="" class="img"></button>
        </form>
        <form action="{% url 'behinds:delete' behind.pk %}" method="POST">
          {% csrf_token %}
          <button type="submit"><img src="{% static "images/delete.png" %}" alt="" class="img"></button>
        </form>
      </div>
      <h1>{{ behind.title }}</h1>
      <div class="info">
        <p>작성자 : {{ behind.user.username }} 감독</p>
        <p>작성일자 : {{ behind.updated_at | date:"Y.m.d H:i:s" }}</p>
      </div>
      <hr>
      <h2>{{ behind.content }}</h2>
    </div>

    <div>
      <form action="{% url 'behinds:comment_create' behind.pk %}"  method="POST">
        {% csrf_token %}
        {{ form.content }}
        {{ form.content.errors }}
        <button type="submit" class="comment-btn">등록</button>
      </form>
    
      <div class="comments">
        {% for comment in comments %}
        <div class="comment-box">
          {% if comment.user_comment == user %}
          <div class="btn">
            <form action="{% url 'behinds:comment_update' behind.pk comment.pk %}">
              <input type="submit" value="수정">
            </form>
            <form action="{% url 'behinds:comment_delete' behind.pk comment.pk %}">
              <input type="submit" value="삭제">
            </form>
          </div>
          {% endif %}
          {{ comment.content }}
          </div>
        {% endfor %}
      </div>
    </div>
    </div>

{% endblock content %}